(this.webpackJsonpprivate=this.webpackJsonpprivate||[]).push([[0],{11:function(e,t,a){e.exports={"task-card":"Styles_task-card__30HVz",head:"Styles_head__Jrq9c",left:"Styles_left__1V0ir",completed:"Styles_completed__3rp7y","button-remove-task":"Styles_button-remove-task__3A0nE",content:"Styles_content__teOla",title:"Styles_title__3xoWw",deadline:"Styles_deadline__3oYip",label:"Styles_label__36bAB",date:"Styles_date__3fawl",description:"Styles_description__3aXi8",text:"Styles_text__f4q1d","form-controls":"Styles_form-controls__1_R6L","button-save-task":"Styles_button-save-task__3N_CJ","button-reset-task":"Styles_button-reset-task__24plX","errors-container":"Styles_errors-container__1PVTO"}},123:function(e,t,a){e.exports=a(198)},196:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(41),r=a.n(c),l=a(15),i=a(14),o=a(16),u=a.n(o),d=a(38),m=a.n(d),p=a(46),f=a.n(p),h=a(65),_=a.n(h),k=function(e){var t,a=e.tag,n=e.setTag,c=e.isSelected,r=e.selectedCX;switch(a){case"Sketch":t="first";break;case"Spotify":t="second";break;case"Dribble":t="third";break;case"Behance":t="fourth";break;case"UX":t="fifth";break;default:throw new Error("Wrong tag!")}var l=u()("".concat(_.a.tag),Object(i.a)({},"".concat(r),c),"".concat(_.a[t]));return s.a.createElement("span",{className:l,onClick:function(){return n?n(a):null}},a)},b=function(e){var t=e.hash,a=e.title,n=e.tag,c=e.deadline,r=e.completed,l=e.clickHolder,o=e.isSelected,d=u()("".concat(f.a.task),Object(i.a)({},"".concat(f.a.completed),r),Object(i.a)({},"".concat(f.a.selected),o)),p=m()(c).format("LL");return s.a.createElement("div",{id:t,className:d,onClick:function(){return l(t)}},s.a.createElement("span",{className:f.a.title},a),s.a.createElement("div",{className:f.a.meta},s.a.createElement("span",{className:f.a.deadline},p),s.a.createElement(k,{tag:n})))},T=a(87),y=a(62),g=a(9),S=a.n(g),v=Object.freeze({TASK_START_FETCHING:"TASK_START_FETCHING",TASK_STOP_FETCHING:"TASK_STOP_FETCHING",TASK_FILL_TASK:"TASK_FILL_TASK",TASK_SET_FETCHING_ERROR:"TASK_SET_FETCHING_ERROR",TASK_SELECTED_TASK:"TASK_SELECTED_TASK"}),E="https://lab.lectrum.io/rtx/api/todos",O="student",F=function(e){if(e>=400&&e<500)throw new Error("Client Error");if(e>=500)throw new Error("Server Error")},C=Object.freeze({fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e;return S.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.awrap(fetch("".concat(E),{method:"GET",headers:{"x-user":O}}));case 2:return e=t.sent,F(e.status),t.abrupt("return",e);case 5:case"end":return t.stop()}}))})),create:function(e){var t;return S.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.a.awrap(fetch("".concat(E),{method:"POST",headers:{"x-user":O,"Content-Type":"application/json"},body:JSON.stringify(e)}));case 2:return t=a.sent,F(t.status),a.abrupt("return",t);case 5:case"end":return a.stop()}}))},update:function(e,t){var a;return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S.a.awrap(fetch("".concat(E,"/").concat(e),{method:"PUT",headers:{"x-user":O,"Content-Type":"application/json"},body:JSON.stringify(t)}));case 2:return a=n.sent,F(a.status),n.abrupt("return",a);case 5:case"end":return n.stop()}}))},delete:function(e){var t;return S.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.a.awrap(fetch("".concat(E,"/").concat(e),{method:"DELETE",headers:{"x-user":O}}));case 2:return t=a.sent,F(t.status),a.abrupt("return",t);case 5:case"end":return a.stop()}}))}}),j=Object.freeze({startFetching:function(){return{type:v.TASK_START_FETCHING}},stopFetching:function(){return{type:v.TASK_STOP_FETCHING}},fill:function(e){return{type:v.TASK_FILL_TASK,payload:e}},selectedTask:function(e){return{type:v.TASK_SELECTED_TASK,payload:e}},setFetchingError:function(e){return{type:v.TASK_SET_FETCHING_ERROR,error:!0,payload:e}},fetchTasks:function(){return function(e){var t,a,n,s;return S.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e(j.startFetching()),c.prev=1,c.next=4,S.a.awrap(C.fetch());case 4:return t=c.sent,c.next=7,S.a.awrap(t.json());case 7:a=c.sent,n=a.data,e(j.fill(n)),c.next=16;break;case 12:c.prev=12,c.t0=c.catch(1),s={message:c.t0.message},e(j.setFetchingError(s));case 16:return c.prev=16,e(j.stopFetching()),c.finish(16);case 19:case"end":return c.stop()}}),null,null,[[1,12,16,19]])}},createTask:function(e){return function(t){var a;return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(j.startFetching()),n.prev=1,n.next=4,S.a.awrap(C.create(e));case 4:Object(l.b)((function(){t(j.selectedTask(null)),t(j.fetchTasks())})),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),a={message:n.t0.message},t(j.setFetchingError(a));case 11:return n.prev=11,t(j.stopFetching()),n.finish(11);case 14:case"end":return n.stop()}}),null,null,[[1,7,11,14]])}},updateTask:function(e){return function(t){var a,n,s;return S.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t(j.startFetching()),delete e.created,a=e.hash,n=Object(y.a)(e,["hash"]),c.prev=3,c.next=6,S.a.awrap(C.update(a,n));case 6:Object(l.b)((function(){t(j.selectedTask(null)),t(j.fetchTasks())})),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(3),s={message:c.t0.message},t(j.setFetchingError(s));case 13:return c.prev=13,t(j.stopFetching()),c.finish(13);case 16:case"end":return c.stop()}}),null,null,[[3,9,13,16]])}},deleteTask:function(e){return function(t){return S.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(j.startFetching()),a.next=3,S.a.awrap(C.delete(e));case 3:Object(l.b)((function(){t(j.selectedTask(null)),t(j.fetchTasks()),t(j.stopFetching())}));case 4:case"end":return a.stop()}}))}}}),N=m()().endOf("day").toDate(),x=Object.freeze({title:"",tag:"",checklist:[],deadline:N,completed:!1,description:""}),w=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.taskManager})),a=t.tasks,s=t.error,c=t.isLoading,r=t.selectedTask,i=Object(n.useState)(null),o=Object(T.a)(i,2),u=o[0],d=o[1];Object(n.useEffect)((function(){a||c||e(j.fetchTasks())}),[e,a,c]);return{taskSelected:u,selectedTask:r,tasks:a,error:s,isLoading:c,clickHolder:function(t){d(t);var n=a&&a.find((function(e){return e.hash===t}));e(j.selectedTask(n))},createNewTask:function(){e(j.selectedTask(x))}}},A=a(94),D=a.n(A),K=function(){var e=w(),t=e.tasks,a=e.isLoading,n=e.clickHolder,c=e.taskSelected,r=!a&&t&&0!==t.length&&t.map((function(e){var t=e.title,a=e.tag,r=e.hash,l=e.deadline,i=e.completed,o=r===c;return s.a.createElement(b,{key:r,hash:r,title:t,tag:a,isSelected:o,deadline:l,completed:i,clickHolder:n})})),l=u()("".concat(D.a.list),Object(i.a)({},"".concat(D.a.empty),null===t||0===t.length));return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:l},s.a.createElement("div",{className:D.a.tasks},r)))},X=a(73),L=a.n(X),V=a(24),R=a(20),P=a(86),H=function(e){var t=e.setFieldValue,a=e.isParentFormChanged,s=Object(l.d)((function(e){return e.taskManager})).selectedTask,c=Object(n.useState)([]),r=Object(T.a)(c,2),i=r[0],o=r[1],u=s&&s.checklist,d=u&&u.map((function(e){return e.title})),m=s&&s.checklist&&s.checklist.filter((function(e){return!0===e.completed})).map((function(e){return e.hash})),p=Object(P.a)({initialValues:{subTasks:d||[],completedTasks:m||[],completedDynamicTasks:[],refs:[]},enableReinitialize:!0}),f=p.values,h=p.getFieldProps,_=p.setValues;!function(e){var t=e.isParentFormChanged,a=e.resetForm,s=e.setDynamicFields;Object(n.useEffect)((function(){t&&(a(),s([]))}),[t,a,s])}({isParentFormChanged:a,resetForm:p.resetForm,setDynamicFields:o}),function(e){var t=e.values,a=e.selectedTask,s=e.setFieldValue,c=e.dynamicFields;Object(n.useEffect)((function(){if(t&&a&&a.checklist){var e=a.checklist.map((function(e,a){var n=t.completedTasks.includes(e.hash);return{title:t.subTasks[a],hash:e.hash,completed:n}})),n=t.subTasks.length-c.length,r=c.map((function(e,a){var s=t.completedDynamicTasks.includes(a);return{title:t.subTasks[n+a],completed:s}}));s("checklist",[].concat(Object(V.a)(e),Object(V.a)(r)))}}),[t,a,s,c])}({values:f,selectedTask:s,setFieldValue:t,dynamicFields:i}),function(e){Object(n.useEffect)((function(){var t=e[e.length-1];t&&t.ref&&t.ref.current.focus()}),[e])}(i);return{subTasks:u,getFieldProps:h,toggleSubtaskCheck:function(e){var t=f.completedTasks;f&&t.includes(e)?_(Object(R.a)({},f,{completedTasks:t.filter((function(t){return t!==e}))})):_(Object(R.a)({},f,{completedTasks:[].concat(Object(V.a)(t),[e])}))},addMore:function(e){var t=Object(V.a)(f.subTasks),a=Object(n.createRef)();t[f.subTasks.length]=e.target.value,_({completedTasks:f.completedTasks,completedDynamicTasks:f.completedDynamicTasks,subTasks:t});var s=[].concat(Object(V.a)(i),[{title:e.target.value,ref:a}]);o(s),e.target.value=""},dynamicFields:i,toggleDynamicTaskCheck:function(e){var t=f.completedDynamicTasks;if(t.includes(e)){var a=t.filter((function(t){return t!==e}));_(Object(R.a)({},f,{completedTasks:f.completedTasks,completedDynamicTasks:a}))}else _(Object(R.a)({},f,{completedTasks:f.completedTasks,completedDynamicTasks:Object(V.a)(new Set([].concat(Object(V.a)(f.completedDynamicTasks),[e])))}))}}},I=a(33),B=a.n(I),G=function(e){var t=e.setFieldValue,a=e.isParentFormChanged,n=H({setFieldValue:t,isParentFormChanged:a}),c=n.subTasks,r=n.getFieldProps,l=n.toggleSubtaskCheck,o=n.addMore,d=n.dynamicFields,m=n.toggleDynamicTaskCheck,p=c&&c.map((function(e,t){var a="subTasks.".concat(t),n=r(a),c=n&&n.value,o=r("completedTasks").value,d=u()("".concat(B.a["sub-task"]),Object(i.a)({},"".concat(B.a.completed),o&&o.includes(e.hash)));return s.a.createElement("div",{className:d,key:L.a.generate()},s.a.createElement("button",{type:"button",onClick:function(){return l(e.hash)}}),s.a.createElement("input",{type:"text",name:a,value:c||"",onChange:n.onChange,onBlur:n.onBlur,ref:e.ref}))})),f=d.map((function(e,t){var a=c?c.length+t:t,n="subTasks.".concat(a),l=r(n),o=l&&l.value,d=r("completedDynamicTasks").value,p=u()("".concat(B.a["sub-task"]),Object(i.a)({},"".concat(B.a.completed),d&&d.includes(t)));return s.a.createElement("div",{className:p,key:"dynamicField-".concat(t)},s.a.createElement("button",{type:"button",onClick:function(){return m(t)}}),s.a.createElement("input",{type:"text",name:n,value:o||"",onChange:l.onChange,onBlur:l.onBlur,ref:e.ref}))}));return s.a.createElement("div",{className:B.a.checklist},s.a.createElement("span",{className:B.a.label},"Checklist"),s.a.createElement("div",{className:B.a["sub-tasks"]},p,f,s.a.createElement("div",{className:B.a["sub-task"]},s.a.createElement("button",{style:{cursor:"inherit"},disabled:!0}),s.a.createElement("input",{type:"text",placeholder:"Add more",onChange:o}))))},M=a(117),z=a.n(M),q=function(e){var t=e.label,a=e.setFieldValue,n=Object(y.a)(e,["label","setFieldValue"]),c=m()().endOf("day").toDate(),r=m()(n.value).endOf("day").toDate(),l=n.value?r:c;return s.a.createElement("div",{className:n.deadlineCX},s.a.createElement("span",{className:n.labelCX},t),s.a.createElement("span",{className:n.dateCX},s.a.createElement(z.a,{onChange:function(e){a("deadline",m()(e).endOf("day").format())},minDate:c,value:l,selected:l||null,dateFormat:"MMMM d, yyyy"})))},J=function(e){var t=e.name,a=e.type,n=e.placeholder,c=e.cx,r=e.value,l=e.onChange,i=e.onBlur,o=r||"";return s.a.createElement("input",{name:t,type:a,placeholder:n,className:c,value:o,onChange:l,onBlur:i})},W=function(e){var t=e.containreCX,a=e.labelCX,n=e.textCX,c=e.label,r=e.placeholder,l=e.value,i=e.id,o=Object(y.a)(e,["containreCX","labelCX","textCX","label","placeholder","value","id"]),u=l||"";return s.a.createElement("div",{className:t},s.a.createElement("label",{htmlFor:i,className:a},c),s.a.createElement("textarea",Object.assign({id:i,placeholder:r,className:n,value:u},o)))},Y=function(e){var t=e.blockCX,a=e.completedCX,n=e.type,c=e.name,r=e.id,l=e.onChange,o=e.onBlur,d=e.value,m=u()("".concat(t),Object(i.a)({},"".concat(a),d));return s.a.createElement("div",{className:m},s.a.createElement("input",{type:n,name:c,id:r,onChange:l,onBlur:o}),s.a.createElement("label",{htmlFor:r},"Mark as complete"))},U=a(204),Q=a(47),Z=Object.freeze(["Sketch","Spotify","Dribble","Behance","UX"]),$=Q.c().shape({title:Q.d().min(3,"Task title is too short").required("Task title field is required"),tag:Q.b().oneOf(Z,"Tag type is invalid").required("Task tag field is required"),checklist:Q.a().of(Q.c().shape({title:Q.d().min(3,"Sub-task title is too short").required("Sub-task title field is required")})).required("Task doesn't contain any sub-tasks")}),ee=a(11),te=a.n(ee),ae=function(){var e=function(){var e=Object(l.d)((function(e){return e.taskManager})),t=e.selectedTask,a=e.isLoading,n=Object(l.c)(),s=Object(P.a)({initialValues:t,enableReinitialize:!0,validationSchema:$,onSubmit:function(e){e.hash?n(j.updateTask(e)):n(j.createTask(e))}}),c=s.handleSubmit,r=s.getFieldProps,i=s.resetForm,o=s.setFieldValue,u=s.values,d=s.errors,m=s.isValid,p=t&&void 0===t.hash?!U.a(x,u):!U.a(t,u);return{selectedTask:t,handleSubmit:c,getFieldProps:r,resetForm:i,setFieldValue:o,values:u,errors:d,isValid:m,setTag:function(e){o("tag",e)},isFormBlocked:a||!p,delTask:function(e){n(j.deleteTask(e))}}}(),t=e.selectedTask,a=e.handleSubmit,n=e.getFieldProps,c=e.resetForm,r=e.setFieldValue,i=e.values,o=e.errors,u=e.isValid,d=e.setTag,m=e.isFormBlocked,p=e.delTask,f=o.title&&s.a.createElement("p",null,o.title),h=o.tag&&s.a.createElement("p",null,o.tag),b=o.checklist&&("string"===typeof o.checklist?s.a.createElement("p",null,o.checklist):o.checklist.map((function(e,t){return s.a.createElement("p",{key:L.a.generate()},"".concat(t+1," ").concat(e.title))}))),T=Object.keys(o)&&Object.keys(o).length>0&&s.a.createElement("div",{className:te.a["errors-container"]},f,h,b),y=Z.map((function(e,t){return s.a.createElement(k,{key:String(t),tag:e,setTag:d,isSelected:i&&i.tag===e,selectedCX:_.a.selected})})),g=i&&s.a.createElement(G,{setFieldValue:r,isParentFormChanged:m}),S=t&&t.hash&&t.hash,v=t&&t.hash&&s.a.createElement("button",{type:"button",className:te.a["button-remove-task"],onClick:function(){return p(S)}}),E=t&&s.a.createElement("form",{className:te.a["task-card"],onSubmit:a},s.a.createElement("div",{className:te.a.head},s.a.createElement(Y,Object.assign({blockCX:te.a.left,completedCX:te.a.completed,type:"checkbox",name:"completed",id:"completed"},n("completed"))),v),s.a.createElement("div",{className:te.a.content},s.a.createElement(J,Object.assign({name:"title",cx:te.a.title,type:"text",placeholder:"Task title"},n("title"))),s.a.createElement(q,Object.assign({label:"Due to",deadlineCX:te.a.deadline,labelCX:te.a.label,dateCX:te.a.date,setFieldValue:r},n("deadline"))),s.a.createElement(W,Object.assign({containreCX:te.a.description,labelCX:te.a.label,textCX:te.a.text,id:"description",label:"Description",placeholder:"Describe your event..."},n("description"))),g,s.a.createElement("div",{className:_.a.tags},y),T,s.a.createElement("div",{className:te.a["form-controls"]},s.a.createElement("button",{type:"reset",className:te.a["button-reset-task"],onClick:c,disabled:m},"Reset"),s.a.createElement("button",{type:"submit",className:te.a["button-save-task"],disabled:m||!u},"Save"))));return s.a.createElement(s.a.Fragment,null,E)},ne=a(95),se=a.n(ne),ce=function(){var e=w().createNewTask;return s.a.createElement(s.a.Fragment,null,s.a.createElement("main",null,s.a.createElement("div",{className:se.a.controls},s.a.createElement("button",{className:se.a["button-create-task"],onClick:e},"New Task")),s.a.createElement("div",{className:se.a.wrap},s.a.createElement(K,null),s.a.createElement(ae,null))))},re=a(29),le=Object.freeze({tasks:null,error:null,isLoading:!1,selectedTask:null}),ie=Object(re.c)({taskManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v.TASK_START_FETCHING:return Object(R.a)({},e,{isLoading:!0});case v.TASK_STOP_FETCHING:return Object(R.a)({},e,{isLoading:!1});case v.TASK_FILL_TASK:return Object(R.a)({},e,{error:null,tasks:n});case v.TASK_SELECTED_TASK:return Object(R.a)({},e,{selectedTask:n});case v.TASK_SET_FETCHING_ERROR:return Object(R.a)({},e,{error:!0,tasks:n});default:return Object(R.a)({},e)}}}),oe=a(121),ue=a(122),de=(Object(oe.createLogger)({duration:!0,collapsed:!0,colors:{title:function(e){return e.error?"firebrick":"deepskyblue"},prevState:function(){return"#1C5FAF"},action:function(){return"#149945"},nextState:function(){return"#A47104"},error:function(){return"#ff0005"}}}),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,re.d),me=[ue.a];var pe=Object(re.e)(ie,de(re.a.apply(void 0,Object(V.a)(me))));a(196),a(197),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement((function(){return s.a.createElement(l.a,{store:pe},s.a.createElement(ce,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,a){e.exports={checklist:"Styles_checklist__2YYp2",label:"Styles_label__SLaim","sub-tasks":"Styles_sub-tasks__2dyTv","sub-task":"Styles_sub-task__AC34l",completed:"Styles_completed__2VJr0",incompleted:"Styles_incompleted__12Qvg"}},46:function(e,t,a){e.exports={task:"Styles_task__ojFk7",selected:"Styles_selected__2XxH5",title:"Styles_title__2nwt-",meta:"Styles_meta__3OeTf",deadline:"Styles_deadline__3Fhzw",completed:"Styles_completed__2uXY7"}},65:function(e,t,a){e.exports={tag:"Styles_tag__Slf3N",first:"Styles_first__gJXia",second:"Styles_second__27heG",third:"Styles_third__24a1C",fourth:"Styles_fourth__2htgq",fifth:"Styles_fifth__Ws5zK",tags:"Styles_tags__295Vy",selected:"Styles_selected__3gMNO"}},94:function(e,t,a){e.exports={list:"Styles_list__2umf-",tasks:"Styles_tasks__2_CHB",empty:"Styles_empty__2ZKWm"}},95:function(e,t,a){e.exports={wrap:"Styles_wrap__4kaY2",controls:"Styles_controls__hDj5E","button-create-task":"Styles_button-create-task__36jnJ"}}},[[123,1,2]]]);
//# sourceMappingURL=main.9b2429a9.chunk.js.map